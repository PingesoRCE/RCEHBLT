<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

   

   
        <div>


            <div id="content" class="right_content">
                <ui:insert name="content"></ui:insert>
                <script language="JavaScript" type="text/javascript">
                    function imprimir() {
                        var bulean = document.getElementById('form1:texto').value;
                        if (bulean === "Si") {
                            window.print();
                        }
                    }
                </script>


                <div class="printBlock" style="width: 100%" align="center">
                    <h:form id="form1">    
                        <p:panel id="panelGeneral" style="border: #ffffff" styleClass="printBlock">
                            <p:growl id="messages" showDetail="true" life="800"/>

                            <p:panel id="datoshospital" style="width: 100%;text-align: center">
                                <div align="center">

                                    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">

                                        <h3 style="font-weight: bold" align="center">SOLICITUD EXAMENES MICROBIOLÓGICOS</h3>
                                        <h4 style="font-weight: bold" align="center">MÉTODO PRESUNTIVO NO CONFIRMATORIO (ELISA)</h4>

                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <h:outputText value="Tipo:" />
                                        <h:outputText id="display" value="#{selectOneView.option}" style="font-weight: bold" />
                                    </h:panelGrid>

                                </div>
                            </p:panel>   


                            <p:panel styleClass="noPrintBlock" id="radioo" style="width: 100%;text-align: center">
                                <div align="center">
                                    <h:panelGrid columns="5" style="margin-bottom:10px" cellpadding="5">
                                        <h:outputText value="Tipo Examen:" />
                                        <p:selectOneRadio value="#{selectOneView.option}">
                                            <p:ajax event="change" update="form1"/>
                                            <f:selectItem itemLabel="VIH" itemValue="VIH" />
                                            <f:selectItem itemLabel="HBs ag" itemValue="HBs ag" />
                                            <f:selectItem itemLabel="HVC" itemValue="HVC" />
                                            <p:ajax update="display" />
                                        </p:selectOneRadio>

                                        <p:spacer />

                                    </h:panelGrid>                                                                              
                                </div>
                            </p:panel>



                            <!--<p:panel id="buscador" styleClass="noPrintBlock" style="width: 100%;text-align: center">
                                <div  align="center">
                                    <h:panelGrid columns="3" cellpadding="5">

                                        <h:outputLabel  value="R.U.N paciente: "/>
                                        <p:autoComplete  id="acSimple" value="{recetaIntMb.busca}"
                                                         completeMethod="{recetaIntMb.complete}" size="35" placeholder="Ingrese RUN...">

                                        </p:autoComplete>

                                        <p:commandButton action="{recetaIntMb.botonAct()}" update="outRun,outNombre,outEdad,
                                                         outSexo,outDomicilio,outFecha,outEstablecimiento,outServicio,outSala,
                                                         outFicha,messages" id="iconSearch"  icon="ui-icon-search" title="Icon Search" />
                                    </h:panelGrid>
                                </div>
                            </p:panel>-->

                            <p:panel id="datosTodos" style="width: 100%;text-align: center">

                                <p:panel id="datospaciente" header="Datos paciente">
                                    <h:outputLabel  style="font-weight: bold" />
                                    <br/>
                                    <p:panelGrid columns="4" style="width: 100%;text-align: left">

                                        <h:outputLabel  style="font-weight: bold" value="R.U.N paciente: "/>
                                        <p:outputLabel  id="outRun" />

                                        <h:outputLabel  style="font-weight: bold" value="Nombre paciente: "/>
                                        <p:outputLabel id="outNombre" />

                                        <h:outputLabel  style="font-weight: bold" value="Fecha de nacimiento: "/>
                                        <p:outputLabel id="outEdad" />

                                        <h:outputLabel  style="font-weight: bold" value="Sexo: "/>
                                        <p:outputLabel id="outSexo" value="-"/>

                                        <h:outputLabel  style="font-weight: bold" value="Domicilio: "/>
                                        <p:outputLabel id="outDomicilio" />

                                        <h:outputLabel  style="font-weight: bold" value="Establecimiento: "/>
                                        <p:outputLabel id="outEstablecimiento" value="-"/>

                                        <h:outputLabel  style="font-weight: bold" value="Servicio: "/>
                                        <p:outputLabel id="outServicio" value="-"/>

                                        <h:outputLabel  style="font-weight: bold" value="Sala: "/>
                                        <p:outputLabel id="outSala" value="-"/>

                                        <h:outputLabel  style="font-weight: bold" value="N° ficha: "/>
                                        <p:outputLabel id="outFicha" />

                                        <h:outputLabel  style="font-weight: bold" value="Fecha: "/>
                                        <p:outputLabel id="outFecha" />

                                    </p:panelGrid>

                                </p:panel>



                                <p:panel id="diagnostic" style="width: 100%; text-align: center">
                                    <div align="left">
                                        <br/>
                                        <h:panelGrid  columns="2" cellpadding="5" style="width: 100%;text-align: center">
                                            <h:outputLabel  value="Diagnóstico clínico: "/>
                                            <h:outputLabel value="__________________________"/>

                                            <h:outputLabel value="Conducta de riesgo:"/>
                                            <h:outputLabel value="__________________________"/>

                                            <h:outputLabel value="Nombre responsable toma de muestra:"/>
                                            <h:outputLabel value="__________________________"/>

                                        </h:panelGrid>
                                        <br/>

                                    </div>
                                    <div align="right">
                                        <h:panelGrid cellpadding="5" style="text-align: right">
                                            <br> </br>
                                            <br> </br>
                                            <h5 align="right">________________________</h5>
                                            <h5 align="right">Firma/Timbre Médico</h5>
                                        </h:panelGrid>
                                    </div>
                                </p:panel>
                                <p:panel>
                                    <h4 style="font-weight: bold">NOTA: TÉCNICA ELISA NO HACE DIAGNÓSTICO, REQUIERE TÉCNICAS DE CONFIRMACIÓN</h4>
                                </p:panel>
                            </p:panel>
                        </p:panel>
                        <div class="noPrintBlock">
                            <p:commandButton id="boton"  type="button" onclick="popup.show()" value="Imprimir" icon="ui-icon-print"  />
                            <p:commandButton update="ConsentimientoVIH" onclick="PF('dialogConsentimientoVIH').show()"  value ="Consentimiento VIH" disabled = "#{!selectOneView.option.equals(selectOneView.vih)}" >
                            </p:commandButton>
                            <p:dialog maximizable="true" minimizable="true" id="dialogVIH" header="Consentimiento Informado" widgetVar="dialogConsentimientoVIH" height="600" width="950">
                                <h:form id="ConsentimientoVIH">
                                    <p:growl id="growl" showDetail="true"/>
                                    <p:panelGrid columns="1" styleClass="companyHeaderGrid">

                                        <p:panel id="InformacionPersonalVIH" header="Datos del Paciente y/o Representante">
                                            <p:panelGrid columns="6">
                                                <p:outputLabel for="Rut" value="Rut: "/>
                                                <p:autoComplete id="Rut" value="#{consentimientoInf.rut}" completeMethod="#{busquedaMB.completarRut}" 
                                                                var="rut" itemLabel="#{rut}" itemValue="#{rut}">
                                                    <!--<f:validator validatorId="Validator.RutValidator"/>-->
                                                    <p:ajax event="blur" listener="#{consentimientoInf.buscarPaciente(actionEvent)}" update="InformacionPersonalVIH"/>
                                                </p:autoComplete>
                                                <p:message for="Rut" display="icon"/>

                                                <p:outputLabel for="Nombres" value="Nombres: " />
                                                <p:inputText readonly="true" id="Nombres" value="#{consentimientoInf.nombres}" />                   
                                                <p:message for="Nombres" display="icon"/>

                                                <p:outputLabel for="Paterno" value="Apellido Paterno: " />
                                                <p:inputText readonly="true" id="Paterno" value="#{consentimientoInf.apellidoPaterno}" />                  
                                                <p:message for="Paterno" display="icon"/>

                                                <p:outputLabel for="Materno" value="Apellido Materno: "/>
                                                <p:inputText readonly="true" id="Materno" value="#{consentimientoInf.apellidoMaterno}" />              
                                                <p:message for="Materno" display="icon"/>

                                                <p:outputLabel for="numFicha" value="Numero de Ficha: "/>
                                                <p:inputText readonly="true" id="numFicha" value="#{consentimientoInf.numeroFicha}" />
                                                <p:message for="numFicha" display="icon"/>

                                                <p:outputLabel  value=" "/>
                                                <p:outputLabel  value=" "/>
                                                <p:outputLabel  value=" "/>

                                                <p:outputLabel for="NombresRep" value="Nombre y Apellido del Representante (Si corresponde): " />
                                                <p:inputText id="NombresRep" value="#{consentimientoInf.nombreApellidoRepresentante}">
                                                    <f:validator validatorId="Validator.NameValidator"/>
                                                </p:inputText>
                                                <p:message for="NombresRep" display="icon"/>

                                                <p:outputLabel for="rutRep" value="Rut: "/>
                                                <p:inputText id="rutRep" value="#{consentimientoInf.rutRepresentante}">
                                                    <f:validator validatorId="Validator.RutValidator"/>                        
                                                </p:inputText>
                                                <p:message for="rutRep" display="icon"/>

                                                <p:outputLabel for="Fecha" value="Fecha: " />
                                                <p:calendar readonly="true" id="Fecha" effect="explode" yearRange="c-100:c" navigator="true" value="#{consentimientoInf.fecha}">                        
                                                </p:calendar>
                                                <p:message for="Fecha" display="icon"/>

                                            </p:panelGrid>
                                        </p:panel>    
                                        <p:panel id="verConsentimientoVIH" toggleable="true" header="Consentimiento">
                                            <div align="justify">
                                                Estimado(a) consultante:
                                                El Ministerio de Salud y el Hospital Barros Luco Trudeau han determinado
                                                que usted debe autorizar por escrito, voluntariamente y
                                                conociendo de que se trata el examen para deteccion del VIH,
                                                por lo tanto ruego a usted firmar frente a la alternativa que
                                                usted decida. Esta decisión no altera su derecho a la atencón que
                                                le corresponde.
                                            </div>                
                                            <br/>
                                            <br/>              

                                            <p:outputLabel value="Estado: "/>
                                            <p:selectOneMenu id="est" value="#{consentimientoInf.estado}" > 
                                                <f:selectItem itemLabel="Pendiente" itemValue="Pendiente" />
                                                <f:selectItem itemLabel="Confirmado" itemValue="Confirmado" />
                                                <f:selectItem itemLabel="Revoco" itemValue="Revoco" />                        
                                            </p:selectOneMenu>
                                            <br/>
                                            <br/>
                                            <p:panelGrid columns="2" > 

                                                <p:outputLabel value="Si Acepto: _____" />
                                                <p:outputLabel value="No Acepto______ " />                                                                                         

                                            </p:panelGrid>
                                            <br/>
                                            <br/>
                                            <p:panelGrid columns="4" >
                                                <div align="left" >
                                                    ____________________________                            
                                                </div>
                                                <div align="center">
                                                    Firma del Paciente
                                                </div>
                                                <p:outputLabel value=" "/>
                                                <p:outputLabel value=" "/>

                                                <div align="left" >
                                                    ____________________________                            
                                                </div>                    
                                                <div align="center">
                                                    Firma del Representante
                                                </div>



                                            </p:panelGrid>
                                        </p:panel>
                                        
                                    
                                    </p:panelGrid>
                                    <!--<p:commandButton   value="Imprimir" disabled="{consentimientoInf.guardadoVIH == false}"   update="ConsentimientoVIH" icon="ui-icon-print">
                                        <p:printer target="ConsentimientoVIH"  />
                                    </p:commandButton>-->
                                    <p:commandButton   value="Imprimir" disabled="#{consentimientoInf.guardadoVIH == false}"   update="ConsentimientoVIH" icon="ui-icon-print">
                                        <p:printer target="ConsentimientoVIH"  />
                                    </p:commandButton>
                                    <!--<p:commandButton  value="Guardar" disabled="{consentimientoInf.guardadoVIH == true}" action="{consentimientoInf.guardarConsentimientoVIH()}" update="ConsentimientoVIH" icon="ui-icon-disk"/>
                                    <p:commandButton  value="Limpiar Datos" actionListener="{consentimientoInf.limpiarDatos()}" update="ConsentimientoVIH" />-->
                                    
                                    <p:commandButton  value="Guardar"  actionListener ="#{consentimientoInf.guardarConsentimientoVIH()}" update="ConsentimientoVIH" icon="ui-icon-disk"/>
                                    <p:commandButton  value="Limpiar Datos" actionListener="#{consentimientoInf.limpiarDatos()}" update="ConsentimientoVIH" />
                                        
                                </h:form>
                            </p:dialog>

                            <!--<p:growl id="message" showDetail="true" life="2000"/>
                            <p:dialog widgetVar="popup" header="Autenticacion" showEffect="fade" hideEffect="explode" >
                                <h:panelGrid columns="2">

                                    <p:outputLabel for="username" value="Usuario:" />
                                    <p:inputText value="{recetaexternaMb.userPrint}"
                                                 id="username" label="username" />

                                    <p:outputLabel for="password" value="Contraseña" />
                                    <p:password value="{recetaexternaMb.passPrint}"
                                                id="password" label="password" />
                                    <p:commandButton id="loginButton" value="Aceptar" actionListener="{recetaexternaMb.comparar()}" update="texto,message" oncomplete="imprimir()"/>

                                    <p:inputText id="texto" type="hidden" value="{recetaexternaMb.verificar}"/>

                                </h:panelGrid>
                            </p:dialog>-->
                        </div>

                    </h:form>
                </div>
            </div>

        </div>

   

</html>
